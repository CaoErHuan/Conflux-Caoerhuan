<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="author" content="order by dede58.com" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>航班延误自动赔付系统——投保</title>
	<meta name="description" content="">
	<meta name="author" content="templatemo">

	<!--<link href='http://fonts.useso.com/css?family=Open+Sans:400,300,400italic,700' rel='stylesheet' type='text/css'>-->
	<link href="css/font-awesome.min.css" rel="stylesheet">
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="jqvmap/jqvmap.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="css/templatemo-style.css" rel="stylesheet">

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

	<script type="text/javascript" src="//api.map.baidu.com/api?v=2.0&ak=FpwKaMXTKeWzAZn9B913bgrs3FkKgAUa"></script>
	<script src="https://unpkg.com/@metamask/detect-provider/dist/detect-provider.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>


</head>

<body>
	<!-- Loader -->
	<!-- Left column -->
	<div class="templatemo-flex-row">
		<div class="templatemo-sidebar">
			<header class="templatemo-site-header">
				<!--	  <div class="square"></div>-->
				<h1>Conflux北斗<br></br>区块链-航班延误自动赔付平台</h1>
			</header>
			<div class="profile-photo-container">
				<img src="img/chainlink.jpg" alt="Profile Photo" class="img-responsive">
				<div class="profile-photo-overlay"></div>
			</div>
			<!-- Search box -->
			<form class="templatemo-search-form" role="search">
				<div class="input-group">
					<button type="submit" class="fa fa-search"></button>
					<input type="text" class="form-control" placeholder="Search" name="srch-term" id="srch-term">
				</div>
			</form>
			<div class="mobile-menu-icon">
				<i class="fa fa-bars"></i>
			</div>
			<nav class="templatemo-left-nav">
				<ul>
<!--					<li><a href="index.html"><i class="fa fa-home fa-fw"></i>登录</a></li>-->
					<!--		<li><a href="data-visualization.html"><i class="fa fa-bar-chart fa-fw"></i>Charts</a></li>-->
					<!--		<li><a href="data-visualization.html"><i class="fa fa-database fa-fw"></i>Data Visualization</a></li>-->
					<li><a href="query.html" class="active"><i class="fa fa-map-marker fa-fw"></i>合同创建</a></li>
					<li><a href="compensate.html"><i class="fa fa-database fa-fw"></i>赔付</a></li>
					<!--		<li><a href="manage-users.html"><i class="fa fa-users fa-fw"></i>Manage Users</a></li>-->
<!--					<li><a href="preferences.html"><i class="fa fa-sliders fa-fw"></i>CHAINLINK配置</a></li>-->
					<!--		<li><a href="login.html"><i class="fa fa-eject fa-fw"></i>Sign Out</a></li>-->
				</ul>
			</nav>
		</div>
		<!-- Main content -->
		<div class="templatemo-content col-1 light-gray-bg">
			<div class="templatemo-top-nav-container">
				<div class="row">
					<nav class="templatemo-top-nav col-lg-12 col-md-12">
						<ul class="text-uppercase">
							<li><a href="" class="active">控制台</a></li>
							<!--			<li><a href="">Dashboard</a></li>-->
							<!--			<li><a href="">Overview</a></li>-->
							<!--			<li><a href="login.html">Sign in form</a></li>-->
						</ul>
					</nav>
				</div>
			</div>




			<div class="templatemo-content-container">
				<div class="templatemo-content-widget white-bg" style="height: 700px;text-align: center;">
					<h1 class="margin-bottom-10">创建保险合同</h1>
					<p class="margin-bottom-0"><a href="http://www.baidu.com" target="_parent">Link to Chainlink
							WORLD</a></p>
					<div style="margin: 0 auto">
						<input type="text" id="query1" placeholder="请输入你的航班日期"> <br>
						<input type="text" id="query2" placeholder="请输入你航班号">  <br>
<!--						<input type="text" id="query3" placeholder="请输入你接收赔付的账户地址">  <br>-->
						<button id="confrim">创建合同并缴纳保费</button>
<!--						<button id="insure">缴纳保费</button>-->
<!--						<button id="draw" style="width: 80px; height: 35px;">确定坐标</button>-->
					</div>
<!--					<div id="undetermined"-->
<!--						style="background-color: #f5f5f5;width: 950px;height: 400px;margin: 20px auto"></div>-->
					<div id="queryOutput"
						style="background-color: #f5f5f5;width: 950px;height: 150px;margin: 50px auto;text-align: left">
						<div class="row" >
							<div class="col-12">
								<div class="card m-b-30">
									<div class="card-body">

										<h4 class="mt-0 header-title">&nbsp;&nbsp;&nbsp;合同信息</h4>
										<!--										<p class="text-muted m-b-30 font-14">-->
										<!--										</p>-->

										<!--										<div id="datatable-buttons_wrapper" class="dataTables_wrapper container-fluid dt-bootstrap4 no-footer">-->
										<!--											<div class="row"><div class="col-sm-12 col-md-6"><div class="dt-buttons btn-group">-->
										<!--												<a class="btn btn-secondary buttons-copy buttons-html5" tabindex="0" aria-controls="datatable-buttons" href="#">-->
										<!--													<span>Copy</span></a><a class="btn btn-secondary buttons-excel buttons-html5" tabindex="0" aria-controls="datatable-buttons" href="#"><span>Excel</span></a><a class="btn btn-secondary buttons-pdf buttons-html5" tabindex="0" aria-controls="datatable-buttons" href="#">-->
										<!--												<span>PDF</span></a><a class="btn btn-secondary buttons-collection dropdown-toggle buttons-colvis" tabindex="0" aria-controls="datatable-buttons" href="#"><span>Column visibility</span></a></div></div><div class="col-sm-12 col-md-6"><div id="datatable-buttons_filter" class="dataTables_filter"><label>Search:<input type="search" class="form-control form-control-sm" placeholder="" aria-controls="datatable-buttons"></label></div></div></div>-->
										<!--											<div class="row"><div class="col-sm-12">-->
										<table id="datatable-buttons"
											class="table table-striped table-bordered dataTable no-footer"
											cellspacing="0" width="100%" role="grid"
											aria-describedby="datatable-buttons_info"
											style="width: 97%;height:90%;margin: 0 auto">
											<thead>
												<tr role="row">
													<th class="sorting_asc" tabindex="0"
														aria-controls="datatable-buttons" rowspan="1" colspan="1"
														aria-sort="ascending"
														aria-label="Name: activate to sort column descending"
														style="width: 200px;">合约地址</th>
													<th class="sorting" tabindex="0" aria-controls="datatable-buttons"
														rowspan="1" colspan="1"
														aria-label="Position: activate to sort column ascending"
														style="width: 200px;"> 航班号 </th>
													<th class="sorting" tabindex="0" aria-controls="datatable-buttons"
														rowspan="1" colspan="1"
														aria-label="Office: activate to sort column ascending"
														style="width: 150px;"> 起飞时间</th>
													<th class="sorting" tabindex="0" aria-controls="datatable-buttons"
														rowspan="1" colspan="1"
														aria-label="Age: activate to sort column ascending"
														style="width: 150px;">预计抵达时间</th>
													<th class="sorting" tabindex="0" aria-controls="datatable-buttons"
														rowspan="1" colspan="1"
														aria-label="Start date: activate to sort column ascending"
														style="width: 230px;">设定赔付单位</th>
													<!--												<th class="sorting" tabindex="0" aria-controls="datatable-buttons" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending" style="width: 109px;">Salary</th></tr>-->
											</thead>
											<tbody>
												<tr role="row" class="odd">
													<td class="data_2" id="address">待写入数据</td>
													<td class="data_2" id="_id"></td>
													<td class="data_3" id="_time"></td>
													<td class="data_4" id="time"></td>
<!--													<td class="data_5">1</td>-->
													<!--												<td>$162,700</td>-->
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>

						</div>
					</div>
				</div> <!-- end col -->
			</div>
		</div>

	</div>
	<footer class="text-right">
		<!--					<p>Designed by NEQUCSA作品组</a></p>-->
	</footer>
	</div>
	</div>
	</div>

	<!-- JS -->
	<script type="text/javascript" src="js/jquery-1.11.2.min.js"></script> <!-- jQuery -->
	<script type="text/javascript" src="js/jquery-migrate-1.2.1.min.js"></script> <!--  jQuery Migrate Plugin -->
	<script type="text/javascript" src="js/templatemo-script.js"></script> <!-- Templatemo Script -->
	<script type="text/javascript" src="jqvmap/jquery.vmap.js"></script>
	<script type="text/javascript" src="jqvmap/maps/jquery.vmap.world.js"></script>
	<script type="text/javascript" src="jqvmap/data/jquery.vmap.sampledata.js"></script>
	<script src="jqvmap/maps/continents/jquery.vmap.africa.js" type="text/javascript"></script>
	<script src="jqvmap/maps/continents/jquery.vmap.asia.js" type="text/javascript"></script>
	<script src="jqvmap/maps/continents/jquery.vmap.australia.js" type="text/javascript"></script>
	<script src="jqvmap/maps/continents/jquery.vmap.europe.js" type="text/javascript"></script>
	<script src="jqvmap/maps/continents/jquery.vmap.north-america.js" type="text/javascript"></script>
	<script src="jqvmap/maps/continents/jquery.vmap.south-america.js" type="text/javascript"></script>
	<script src="jqvmap/maps/jquery.vmap.usa.js" type="text/javascript"></script>
	<script type="text/javascript">

	</script>
	<script>
		// var Web3 = require('web3');
		const provider = new Web3.providers.WebsocketProvider("ws://59.110.220.18:8546")
		var web3 = new Web3(provider);
		var target_address = "";
		var blockNumber;

		var checkKey = undefined;
		var address = "0x53fD27EE81cD5868153916666aFC23F5ce14cb2e";

		function sleep(ms) {
			for (var t = Date.now(); Date.now() - t <= ms;);
		}

		$('#confrim').click(function () {

			const date = $('#query1').val();
			const flightId = $('#query2').val();
			urlDate = "?DATE=" + date
			urlFlightId = "&FLIGHT_ID=" + flightId;
 			// url += (urlDate + urlFlightId + AppCode);
			var _date = date;
			var _id = flightId;
			var flightContract = new web3.eth.Contract([{"constant":false,"inputs":[{"name":"_jobId","type":"bytes32"}],"name":"requestState","outputs":[{"name":"requestId","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"compensate","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"burn","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_requestId","type":"bytes32"},{"name":"_temp","type":"bytes32"}],"name":"fulfillFlight","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"x","type":"bytes32"}],"name":"bytes32ToString","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_date","type":"string"},{"name":"_id","type":"string"}],"name":"getState","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"state","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_date","type":"string"},{"name":"_id","type":"string"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"id","type":"bytes32"}],"name":"ChainlinkRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"id","type":"bytes32"}],"name":"ChainlinkFulfilled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"id","type":"bytes32"}],"name":"ChainlinkCancelled","type":"event"}]);
			var flight = flightContract.deploy({
				data: '0x600160045560e0604052602960808190527f687474703a2f2f34372e39332e3130322e3232342f666c696768742f6765744460a09081527f6174613f646174653d000000000000000000000000000000000000000000000060c052620000699160069190620001e1565b506040805180820190915260048082527f6e756c6c000000000000000000000000000000000000000000000000000000006020909201918252620000b091600b91620001e1565b50348015620000be57600080fd5b50604051620019be380380620019be833981016040528051602080830151918301805190939290920191620000fa9160089190850190620001e1565b50805162000110906009906020840190620001e1565b506200013973c64e8ae217d72cd8cfdf321db81227e0e05c96616401000000006200019d810204565b620001617385266b67470315cd19e00415b1b0d61175852d07640100000000620001bf810204565b5050600a8054600160a060020a031990811673c64e8ae217d72cd8cfdf321db81227e0e05c966117909155600780549091163317905562000286565b60028054600160a060020a031916600160a060020a0392909216919091179055565b60038054600160a060020a031916600160a060020a0392909216919091179055565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200022457805160ff191683800117855562000254565b8280016001018555821562000254579182015b828111156200025457825182559160200191906001019062000237565b506200026292915062000266565b5090565b6200028391905b808211156200026257600081556001016200026d565b90565b61172880620002966000396000f3006080604052600436106100825763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166305b9077381146100845780631f97a75a146100ae57806344df8e70146100c35780637b3aad70146100d85780639201de55146100f3578063a4e9dad614610180578063c19d93fb14610217575b005b34801561009057600080fd5b5061009c60043561022c565b60408051918252519081900360200190f35b3480156100ba57600080fd5b506100826103cb565b3480156100cf57600080fd5b5061008261055f565b3480156100e457600080fd5b50610082600435602435610595565b3480156100ff57600080fd5b5061010b6004356106b5565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561014557818101518382015260200161012d565b50505050905090810190601f1680156101725780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561018c57600080fd5b506040805160206004803580820135601f810184900484028501840190955284845261008294369492936024939284019190819084018382808284375050604080516020601f89358b018035918201839004830284018301909452808352979a9998810197919650918201945092508291508401838280828437509497506107fb9650505050505050565b34801561022357600080fd5b5061010b610c1b565b6000610236611614565b61026183307f7b3aad7000000000000000000000000000000000000000000000000000000000610ca9565b604080518082018252600381527f676574000000000000000000000000000000000000000000000000000000000060208083019190915260068054845160026001831615610100026000190190921691909104601f810184900484028201840190955284815294955061033894929390918301828280156103235780601f106102f857610100808354040283529160200191610323565b820191906000526020600020905b81548152906001019060200180831161030657829003601f168201915b505050505083610cd49092919063ffffffff16565b604080518082018252600481527f70617468000000000000000000000000000000000000000000000000000000006020808301919091528251808401909352600583527f76616c7565000000000000000000000000000000000000000000000000000000908301526103b29183919063ffffffff610cd416565b6103c481670de0b6b3a7640000610cfe565b9392505050565b604080517f6e756c6c0000000000000000000000000000000000000000000000000000000081529051908190036004018120600b8054919290918190839060026101006001831615026000190190911604801561045f5780601f1061043d57610100808354040283529182019161045f565b820191906000526020600020905b81548152906001019060200180831161044b575b50509150506040518091039020600019161415151561047d57600080fd5b60405180807f31000000000000000000000000000000000000000000000000000000000000008152506001019050604051809103902060001916600b60405180828054600181600116156101000203166002900480156105145780601f106104f2576101008083540402835291820191610514565b820191906000526020600020905b815481529060010190602001808311610500575b5050915050604051809103902060001916141561055d576040513390600090670de0b6b3a76400009082818181858883f1935050505015801561055b573d6000803e3d6000fd5b505b565b600754600160a060020a0316331461057657600080fd5b6007805473ffffffffffffffffffffffffffffffffffffffff19169055565b6000828152600560205260409020548290600160a060020a0316331461064257604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602860248201527f536f75726365206d75737420626520746865206f7261636c65206f662074686560448201527f2072657175657374000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b600081815260056020526040808220805473ffffffffffffffffffffffffffffffffffffffff191690555182917f7cc135e0cebb02c3480ae5d74d377283180a2601f8f644edf7987b009316c63a91a261069b826106b5565b80516106af91600b91602090910190611649565b50505050565b6040805160208082528183019092526060918291600091829182918591908082016104008038833901905050945060009350600092505b6020831015610761576008830260020a870291507fff000000000000000000000000000000000000000000000000000000000000008216156107565781858581518110151561073757fe5b906020010190600160f860020a031916908160001a9053506001909301925b6001909201916106ec565b836040519080825280601f01601f19166020018201604052801561078f578160200160208202803883390190505b509050600092505b838310156107f15784838151811015156107ad57fe5b90602001015160f860020a900460f860020a0281848151811015156107ce57fe5b906020010190600160f860020a031916908160001a905350600190920191610797565b9695505050505050565b816040518082805190602001908083835b6020831061082b5780518252601f19909201916020918201910161080c565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916600860405180828054600181600116156101000203166002900480156108b95780601f106108975761010080835404028352918201916108b9565b820191906000526020600020905b8154815290600101906020018083116108a5575b50509150506040518091039020600019161415156108d657600080fd5b806040518082805190602001908083835b602083106109065780518252601f1990920191602091820191016108e7565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916600960405180828054600181600116156101000203166002900480156109945780601f10610972576101008083540402835291820191610994565b820191906000526020600020905b815481529060010190602001808311610980575b50509150506040518091039020600019161415156109b157600080fd5b60068054604080516020601f60026000196101006001881615020190951694909404938401819004810282018101909252828152610a499390929091830182828015610a3e5780601f10610a1357610100808354040283529160200191610a3e565b820191906000526020600020905b815481529060010190602001808311610a2157829003601f168201915b505050505083610d21565b8051610a5d91600691602090910190611649565b5060068054604080516020601f60026000196101006001881615020190951694909404938401819004810282018101909252828152610b2b9390929091830182828015610aeb5780601f10610ac057610100808354040283529160200191610aeb565b820191906000526020600020905b815481529060010190602001808311610ace57829003601f168201915b50505050506040805190810160405280600581526020017f262669643d000000000000000000000000000000000000000000000000000000815250610d21565b8051610b3f91600691602090910190611649565b5060068054604080516020601f60026000196101006001881615020190951694909404938401819004810282018101909252828152610bd89390929091830182828015610bcd5780601f10610ba257610100808354040283529160200191610bcd565b820191906000526020600020905b815481529060010190602001808311610bb057829003601f168201915b505050505082610d21565b8051610bec91600691602090910190611649565b50610c167f393162623962623937393532343962313931373561646166393165626439613761022c565b505050565b600b805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181529291830182828015610ca15780601f10610c7657610100808354040283529160200191610ca1565b820191906000526020600020905b815481529060010190602001808311610c8457829003601f168201915b505050505081565b610cb1611614565b610cb9611614565b610ccb8186868663ffffffff610e4016565b95945050505050565b6080830151610ce9908363ffffffff610e9216565b6080830151610c16908263ffffffff610e9216565b600354600090610d1890600160a060020a03168484610eaf565b90505b92915050565b606080606080606060008088955087945084518651016040519080825280601f01601f191660200182016040528015610d64578160200160208202803883390190505b50935083925060009150600090505b8551811015610dd1578581815181101515610d8a57fe5b90602001015160f860020a900460f860020a028383806001019450815181101515610db157fe5b906020010190600160f860020a031916908160001a905350600101610d73565b5060005b8451811015610e33578481815181101515610dec57fe5b90602001015160f860020a900460f860020a028383806001019450815181101515610e1357fe5b906020010190600160f860020a031916908160001a905350600101610dd5565b5091979650505050505050565b610e48611614565b610e58856080015161010061117c565b5050918352600160a060020a031660208301527bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916604082015290565b610e9f82600383516111b6565b610c16828263ffffffff6112b316565b6000306004546040516020018083600160a060020a0316600160a060020a03166c01000000000000000000000000028152601401828152602001925050506040516020818303038152906040526040518082805190602001908083835b60208310610f2b5780518252601f199092019160209182019101610f0c565b51815160209384036101000a6000190180199092169116179052604080519290940182900390912060045460608a015260008181526005909252838220805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a038c1617905592519295508594507fb5e6e01e79f91267dc17b4e6314d5d4d03593d2ceee0fbb452b750bd70ea5af99350919050a2600254600160a060020a0316634000aea08584610fd9876112cd565b6040518463ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018084600160a060020a0316600160a060020a0316815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b8381101561105f578181015183820152602001611047565b50505050905090810190601f16801561108c5780820380516001836020036101000a031916815260200191505b50945050505050602060405180830381600087803b1580156110ad57600080fd5b505af11580156110c1573d6000803e3d6000fd5b505050506040513d60208110156110d757600080fd5b5051151561116c57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602360248201527f756e61626c6520746f207472616e73666572416e6443616c6c20746f206f726160448201527f636c650000000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b6004805460010190559392505050565b6111846116c7565b60208206156111995760208206602003820191505b506020828101829052604080518085526000815290920101905290565b601781116111d8576111d28360ff84811660200216831761144e565b50610c16565b60ff811161120c576111f9836018602060ff8616021763ffffffff61144e16565b506111d28382600163ffffffff61146616565b61ffff81116112415761122e836019602060ff8616021763ffffffff61144e16565b506111d28382600263ffffffff61146616565b63ffffffff81116112785761126583601a602060ff8616021763ffffffff61144e16565b506111d28382600463ffffffff61146616565b67ffffffffffffffff8111610c16576112a083601b602060ff8616021763ffffffff61144e16565b506106af8382600863ffffffff61146616565b6112bb6116c7565b610d1883846000015151848551611487565b8051602080830151604080850151606086810151608088015151935160006024820181815260448301829052606483018a9052600160a060020a03881660848401527bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19861660a484015260c48301849052600160e48401819052610100610104850190815288516101248601528851969b7f40429946000000000000000000000000000000000000000000000000000000009b949a8b9a91999098909796939591949361014401918501908083838e5b838110156113b257818101518382015260200161139a565b50505050905090810190601f1680156113df5780820380516001836020036101000a031916815260200191505b5060408051601f198184030181529190526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19909d169c909c17909b5250989950505050505050505050919050565b6114566116c7565b610d18838460000151518461153d565b61146e6116c7565b61147f848560000151518585611588565b949350505050565b61148f6116c7565b6000806000855185111515156114a457600080fd5b876020015185880111156114ce576114ce886114c68a602001518a89016115e6565b6002026115fd565b8751805188602083010194508089880111156114ea5788870182525b60208801935050505b602085106115155781518352601f1990940193602092830192909101906114f3565b505181516020949094036101000a600019018019909116931692909217909152509192915050565b6115456116c7565b60208401518310611561576115618485602001516002026115fd565b835180516020858301018481538186141561157d576001820183525b509495945050505050565b6115906116c7565b6000856020015185840111156115af576115af868685016002026115fd565b6001836101000a03905085518386820101858319825116178152815185880111156115da5784870182525b50959695505050505050565b6000818311156115f7575081610d1b565b50919050565b8151611609838361117c565b506106af83826112b3565b6040805160c0810182526000808252602082018190529181018290526060810191909152608081016116446116c7565b905290565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061168a57805160ff19168380011785556116b7565b828001600101855582156116b7579182015b828111156116b757825182559160200191906001019061169c565b506116c39291506116df565b5090565b60408051808201909152606081526000602082015290565b6116f991905b808211156116c357600081556001016116e5565b905600a165627a7a72305820e096b8b921c09b70b2406a295f8759f6d7d29b6aacb52ba571301f7f9e32f8eb0029',
				arguments: [
					_date,
					_id,
				]
			}).send({
				from: address,
				gas: '4700000'
			}, function (e, contract){
				console.log(e, contract);
				if (typeof contract.address !== 'undefined') {
					console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
				}
			}).then(function(newContractInstance){
				console.log("合约部署成功，合约地址为" + newContractInstance.options.address) // instance with the new contract address
				alert("合约部署成功，合约地址为" + newContractInstance.options.address);
				target_address = newContractInstance.options.address;
				$('#address').empty();
				$('#address').append(target_address);
				$('#_id').append(_id);
				$('#_time').append(_date);
				$('#time').append(date);
				// console.log("合约部署成功，合约地址为" + newContractInstance.options.address) // instance with the new contract address
				// target_address = newContractInstance.options.address;
				var myContract = new web3.eth.Contract([
					{
						"constant": false,
						"inputs": [
							{
								"name": "spender",
								"type": "address"
							},
							{
								"name": "value",
								"type": "uint256"
							}
						],
						"name": "approve",
						"outputs": [
							{
								"name": "",
								"type": "bool"
							}
						],
						"payable": false,
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"constant": true,
						"inputs": [],
						"name": "totalSupply",
						"outputs": [
							{
								"name": "",
								"type": "uint256"
							}
						],
						"payable": false,
						"stateMutability": "view",
						"type": "function"
					},
					{
						"constant": false,
						"inputs": [
							{
								"name": "from",
								"type": "address"
							},
							{
								"name": "to",
								"type": "address"
							},
							{
								"name": "value",
								"type": "uint256"
							}
						],
						"name": "transferFrom",
						"outputs": [
							{
								"name": "",
								"type": "bool"
							}
						],
						"payable": false,
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"constant": false,
						"inputs": [
							{
								"name": "_to",
								"type": "address"
							},
							{
								"name": "_value",
								"type": "uint256"
							},
							{
								"name": "_data",
								"type": "bytes"
							}
						],
						"name": "transferAndCall",
						"outputs": [
							{
								"name": "success",
								"type": "bool"
							}
						],
						"payable": false,
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"constant": true,
						"inputs": [
							{
								"name": "who",
								"type": "address"
							}
						],
						"name": "balanceOf",
						"outputs": [
							{
								"name": "",
								"type": "uint256"
							}
						],
						"payable": false,
						"stateMutability": "view",
						"type": "function"
					},
					{
						"constant": false,
						"inputs": [
							{
								"name": "to",
								"type": "address"
							},
							{
								"name": "value",
								"type": "uint256"
							}
						],
						"name": "transfer",
						"outputs": [
							{
								"name": "",
								"type": "bool"
							}
						],
						"payable": false,
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"constant": true,
						"inputs": [
							{
								"name": "owner",
								"type": "address"
							},
							{
								"name": "spender",
								"type": "address"
							}
						],
						"name": "allowance",
						"outputs": [
							{
								"name": "",
								"type": "uint256"
							}
						],
						"payable": false,
						"stateMutability": "view",
						"type": "function"
					},
					{
						"anonymous": false,
						"inputs": [
							{
								"indexed": true,
								"name": "from",
								"type": "address"
							},
							{
								"indexed": true,
								"name": "to",
								"type": "address"
							},
							{
								"indexed": false,
								"name": "value",
								"type": "uint256"
							},
							{
								"indexed": false,
								"name": "data",
								"type": "bytes"
							}
						],
						"name": "Transfer",
						"type": "event"
					},
					{
						"anonymous": false,
						"inputs": [
							{
								"indexed": true,
								"name": "owner",
								"type": "address"
							},
							{
								"indexed": true,
								"name": "spender",
								"type": "address"
							},
							{
								"indexed": false,
								"name": "value",
								"type": "uint256"
							}
						],
						"name": "Approval",
						"type": "event"
					},
					{
						"anonymous": false,
						"inputs": [
							{
								"indexed": true,
								"name": "from",
								"type": "address"
							},
							{
								"indexed": true,
								"name": "to",
								"type": "address"
							},
							{
								"indexed": false,
								"name": "value",
								"type": "uint256"
							}
						],
						"name": "Transfer",
						"type": "event"
					}
				],'0xC64E8Ae217d72cd8cFdf321Db81227E0e05C9661');
				var amount = web3.utils.toWei('100','ether') + "";
				myContract.methods.transfer(target_address,amount).send({from:address}).then(function (receipt){
					// console.log(receipt);
					console.log("已发送100个LINK");
				})
				web3.eth.sendTransaction({from:address,to:target_address,value:web3.utils.toWei('1','ether')}).then(function (receipt){
					// console.log(receipt);
					console.log("已发送 1 个 ETH");
				})
			})
		})
	</script>
</body>

</html>